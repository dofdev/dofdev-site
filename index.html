<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description"
    content="An effort to open new degrees of spatial interaction free to the world.">
  <meta name="keywords" content="Ethan Merchant, Nikolas McAvoy, dof dev, degrees of freedom, xr developer">
  <meta name="author" content="Ethan Merchant & Nikolas McAvoy">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <title>dofdev</title>

  <link rel="stylesheet" href="/style.css?v32">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="in-view.min.js"></script>
  <script src="includes/includer.js?v1"></script>
  <script src="https://embed.twitch.tv/embed/v1.js"></script>
</head>

<body>
  <div id="navElement"></div>
  <!-- <div id="time">
    00:00
  </div> -->
  <div id="mission">
    <!-- <div style="height: 2em;"></div> -->

    <img src="res/the-problem.png?v4">

    <p style="text-align: right">
      An effort to open new degrees<br>
      of spatial interaction free<br>
      to the world.
    </p>
    <img src="res/square-logo.png" id="logo">
    <h1 style="font-size: 1.1em; padding-bottom: 0;">degrees of freedom development</h1>
    <br>
  </div>
  <!-- <div id="fdeg">&conint;</div> -->

  <!-- <div style="position: fixed; left: 0; right: 0; top: 0; bottom: 0; background: white; z-index: 1000;"></div> -->


  <!-- <div class="split"></div> -->
  <div style="height: 1em;"></div>

  <div id="Contacts">
    <div class="Contact" id="ethan">
      <div class="profile-pic" style="background-image: url(res/profiles/ethan.png?v3)"></div>
      <div class="Info">
        <div style="color: white; font-size: var(--normal-font);">Ethan Merchant</div>
        <a href="https://twitter.com/spatialfree">@spatialfree</a>
        <br>
        <!-- <div>vscode | unity | blender</div>
        <div>[ engineer ]</div> -->
      </div>
    </div>
    <!-- <div class="break"></div> -->
    <div class="Contact">
      <div class="profile-pic" style="background-image: url(res/profiles/nik.png);"></div>
      <div class="Info">
        <div style="color: white; font-size: var(--normal-font);">Niko Ryan</div>
        <a href="https://twitter.com/opendegree">@opendegree</a>
        <br>
        <!-- <div>vcv rack | audacity</div>
        <div>[ designer ]</div> -->
      </div>
    </div>
  </div>

  <div class="btn-cluster" style="display:none">

    <a href="/art" class="btn">
      <svg width="24" height="24"
        style="padding: 0.5em 0em; padding-right: 1em; stroke-width:0.25px; fill: rgba(255, 0, 0, 0.5); stroke: rgb(182, 0, 0);">
        <polygon points="0,08 06,02 12,08 18,02 24,08 12,22" />
      </svg>
      <div>art</div>
    </a>

    <a href="https://discord.gg/65jZCW9" class="btn">
      <svg width="24" height="24"
        style="padding: 0.5em 0em; padding-right: 1em; stroke-width:0.25px; fill: rgba(78, 94, 240, 0.5); stroke: rgb(0, 0, 182)">
        <polygon points="02,04 22,04 22,20 08,20 02,24" />
      </svg>
      <div>discord</div>
    </a>

    <a href="mailto:contact@dofdev.org" class="btn">
      <svg width="24" height="24"
        style="padding: 0.5em 0em; padding-right: 1em; stroke-width:0.25px; fill: rgba(40, 255, 68, 0.5); stroke: rgb(0, 182, 0)">
        <polygon points="06,00 12,12 06,24 00,12" />
        <polygon points="18,00 21,05 18,10 15,05" />
      </svg>
      <div>consult</div>
    </a>

    <a href="https://patreon.com/dofdev" class="btn">
      <svg width="24" height="24"
        style="padding: 0.5em 0em; padding-right: 1em; stroke-width:0.25px; fill: rgba(249, 103, 84, 0.74); stroke: rgb(184, 76, 62)">
        <polygon points="01,02 05,02 05,22 01,22" />
        <circle cx="16" cy="10" r="8" />
      </svg>
      <div>patreon</div>
    </a>

  </div>


  <br>
  <br>

  <h1>projects</h1>
  <div style="text-align: center;">[ FREE grayscaled versions ]</div>
  <div id="gallery">
    <a class="cover" href="https://dofdev.itch.io/vien" title="Vien"
      style="background-image: url(res/covers/vien.png?v2);">
      <div>vien | $6</div>
    </a>
    <a class="cover" href="/snakeinabox" title="Snake in a Box"
      style="background-image: url(res/covers/snakeinabox.png?v3)">
      <div>snake in a box | $3</div>
    </a>
    <a class="cover" href="/salishkeyboard" title="Salish Keyboard"
      style="background-image: url(res/covers/salishkeyboard.png)">
      <div>salish keyboard</div>
    </a>
  </div>

  <h1>dofs</h1>
  <p id="footer" style="margin: 0;">
    copyright &copy; 2018-2021 dofdev
    <br>
    This is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation.
    <br>
    <a href="https://www.gnu.org/licenses/gpl-3.0.en.html">GPL-3.0-only</a>
  </p>

  <div id="dofs"></div>

  <!-- <h1>in dev</h1> -->
  <!-- <div style="text-align: center;">[ patreon early access ]</div> -->
  <!-- <div id="gallery"> -->
    <!-- <a class="cover disabled" title="Vader-Life: Alyx Immortal"
      style="background-image: url(res/covers/vaderlife.png?v2)">
      <div>Vader-Life: Alyx Immortal</div>
    </a> -->
    <!-- <a class="cover" title="dofcon" href="https://github.com/dofdev/dofcon"
      style="background-image: url(res/covers/dofcon.gif)">
      <div>dofcon</div>
    </a> -->
    <!-- <a class="cover" title="pixelgon" href="/pixelgon" style="background-image: url(res/covers/pixelgon.png)">
      <div>pixelgon</div>
    </a>
    <a class="cover" title="stretch silo" href="/stretchsilo"
      style="background-image: url(res/covers/stretchsilo.png?v2)">
      <div>stretch silo</div>
    </a> -->
    <!-- <a class="cover" href="https://opendegree.xyz" title="Open Degree"
      style="background-image: url(res/covers/opendegree.png?v3)">
      <div>Open Degree</div>
    </a> -->
  <!-- </div> -->

  <!-- <iframe class="pxgviewer" src="/res/pxgViewer/index.html" style="border:0px #000000 none;" name="pxgViewer"
    scrolling="no"></iframe> -->

  <!-- <video width="100%" controls="auto" loop autoplay muted
    src="https://dofdev-team-bucket.storage.fleek.co/2020-01-11_MyBall.webm"></video> -->

  <!-- <video width="100%" controls="auto" loop autoplay
    src="https://dofdev-team-bucket.storage.fleek.co/first-c.mp4"></video> -->

  <br>
  <br>
  <br>

  <!-- <iframe src="https://discord.com/widget?id=557638031805513757&theme=dark" width="350" height="500" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe> -->
  
  <h1>live</h1>
  <div style="text-align: center;">[ development and more ]</div>
  <br>
  <div class="vid" id="twitch-embed"></div>
  <br>

  <!-- 
  <div class="strip">
    <img src="https://ipfs.io/images/ipfs-logo.svg" href="https://ipfs.io/">
    <div>Get IPFS and join in the distributed web.
      <br>
      <a style="text-decoration: underline;"
        href="https://chrome.google.com/webstore/detail/ipfs-companion/nibjojkomfdiaoajekhjakgkdhaomnch?hl=en">chrome
        extension</a>
    </div>
  </div> -->

  <script>

    var tags = [ "all", "head", "eyes", "hands" ]
    const dofTree = [
      { name:'stretch-cursor', tags:['hands'], 
        code:[
          { context:'°', code:'stretch = dist(offHand, mainHand)<br>stretch = max(stretch - deadzone, 0)<br>dir = mainHand.fwd<br>cursor = mainHand.pos + dir * stretch * 3' },
          { context:'backhanded', code:'stretch = dist(offHand, mainHand)<br>stretch = max(stretch - deadzone, 0)<br>dir = (mainHand - offHand).normalized<br>cursor = mainHand.pos + dir * stretch * 3' },
        ],
        history:[
          { date:'Oct 2021', log:'Late 2018 while working on a vr rendition of missile command we went from using the hand as a cursor, to extending it out with the joystick. While brainstorming different scalars one morning I considered using the distance between the two controllers.<br>-Ethan Merchant' },
        ]
      },
      { name:'oriel', tags:['head'], 
        code:[
          { context:'°', code:'flip cube normals<br>cull backfaces<br>stencil shader render contents' },
        ],
        history:[
          { date:'Oct 2021', log:'March 2019 wanting an encapsulation method for VR software we spatialized the window paradigm with the architectural concept of an oriel fitting the problem beautifully.<br>-Ethan Merchant' }
        ]
      },
      { name:'color-cube', tags:['eyes'], 
        code:[
          { context:'°', code:'color.rgb = (pos.x, pos.y, pos.z)<br>Render(outline)' },
        ],
        history:[
          { date:'Oct 2021', log:'May 2019 In response to a color picker Ian Kettlewell made for his novel vr boolean modeling tool, I insisted that "Color is a three dimensional field, why use a 2d interface when your input devices key feature is positional tracking."<br>-Ethan Merchant"' }
        ]
      },
      { name:'orbital-view', tags:['head'], 
        code:[
          { context:'°', code:'oriel.pos = head.rot * fwd' },
          { context:'amplified', code:'oriel.pos = head.rot * fwd<br>oriel.rot = rot.euler(0, head.euler.y * -4, 0)' },
        ],
        history:[
          { date:'Oct 2021', log:'Oct 2019 Niko had been talking about a concept of look left turn right for a long time, and snake in a box provided a path to bring it into reality.<br>-Ethan Merchant' }
        ]
      },
      { name:'fullstick', tags:['hands'], code:[
        { context:'°', code:'rot = (stick.y * 90, 0, stick.x * 90)<br>dir = stick.pressed ? down : up<br>output = hand.rotation * rot * dir' },
      ]},
      { name:'offset-cursor', tags:['hands'], code:[
        { context:'°', code:'dragPos = mainHand.pos<br>if (mainHand.button.down)<br>  lastPos = dragPos<br><br>if (mainHand.button.held)<br>  cursor += (dragPos - lastPos) * 12<br><br>lastPos = dragPos' },
        { context:'x-orbital-view', code:'dragPos = mainHand.pos // * head.rot<br>newRot = orielRot * head.rot<br>if (mainHand.button.down)<br>  lastPos = dragPos<br><br>if (mainHand.button.held)<br>  cursor += newRot * ((dragPos - lastPos) * 12)<br>  cursor = newRot * rot.inverse(oldRot) * cursor<br><br>lastPos = dragPos<br>oldRot = newRot' },
      ]},
      { name: 'trackballer', tags:['hands'], code:[
        {context:'°', code:'newRot = hand.rot * heldRot * spinRot<br>if (offCon.triggerBtn.held && held != null)<br>  newDelta = Inverse(newRot) * offHand.rotDelta<br>  newDelta *= newRot<br>  spinDelta = Slerp(<br>    spinDelta,<br>    newDelta, <br>    Time.deltaTime / 0.1f<br>  )<br>spinRot *= spinDelta<br><br>// lower the speed the higher the friction<br>friction = 1 - Clamp01(<br>  Angular(spinDelta).magnitude / deltaTime / 15<br>)<br>friction = friction * friction * friction;<br>spinDelta = Slerp(<br>r  Quaternion.identity, <br>  spinDelta,<br>  1 - (friction * Time.deltaTime)<br>)<br>heldRotDelta = newRot * Inverse(oldRot)<br><br>held.rot = hand.rot * heldRot * spinRot<br>// or<br>held.angularVel = Angular(heldRotDelta) / deltaTime'}
      ]},
      { name:'parabolizer', tags:['hands'], 
        code:[
          { context:'°', code:'a = offHand.pos<br>hit = raycast(offHand.fwd, midPlane)<br>dist = distance(hit, midPlane)<br>b = mainHand.pos + mainHand.rot * fwd * dist<br>c = backhanded stretch-cursor<br>pos = lerp(lerp(a, b, t), lerp(b, c, t), t)' },
        ], 
        history:[
          { date:'Oct 2021', log:'Late 2020 I imagined that I wanted to control a spatial parabola with my 2 hands. At first I struggled trying to make a parabola because I was thinking with only 2 points. About a year later with the creation of the back handed stretch cursor I realized I could utilize a third point by combining the original stretch cursor with this new one.<br>-Niko Ryan' },
        ]
      },
      { name:'twist-cursor', tags:['hands'], 
        code:[
          { context:'°', code:'rel = LookRotation(mainHand.rot * forward)<br>twist = Angle(rel * up, hand.rot * up) / 180<br>cursor = hand.pos + hand.rot * forward * twist' },
        ], 
        history:[
          { date:'Oct 2021', log:'init' },
        ]
      },
    ]
    


    var order = 0;
    $(document).ready(function () {
      order = Math.floor(Math.random() * 2)
      $('#ethan').css("order", "" + order)
      
      dofs(7)
      // // list by tag hands, head, eyes
      // for (var i = 0; i < dofTree.length; i++) {
      //   if (dofTree[i].tags.includes('hands')) {
      //     console.log(dofTree[i].name)
      //   }
      // }
      // console.log("")
      // // list by context 1:1, 6:1
      // for (var i = 0; i < dofTree.length; i++) {
      //   for (var j = 0; j < dofTree[i].code.length; j++) {
      //     if (dofTree[i].code[j].context == '6:1') {
      //       console.log(dofTree[i].name)
      //     }
      //   }
      // }
      // console.log("")


      // decaTime();
      // setInterval(decaTime, 1000);

      // const time = document.lastModified;
      // $('#time').html("last updated: " + time)
    })

    var tag = 'all'
    function setTag(index) {
      this.tag = tags[index]
      dofs(-1)
    }
    
    var lastIndex = -1
    function dofs (index) {
      console.log(tag)
      if (index == lastIndex) {
        index = lastIndex = -1
      }
      else {
        lastIndex = index
      }
      // list oldest to latest
      var html = ''
      // '<div id="dofs">'
      html += '<div style="display:flex; justify-content:space-between;">'
      html += '<div></div>'
      for (var i = 0; i < tags.length; i++) {
        // color white on selected tag
        var color = 'var(--light)'
        if (tags[i] == tag) {
          color = 'white'
        }
        html += '<div onclick="setTag('+i+')" style="color:'+color+'; cursor:pointer;">' + tags[i] + '</div>'
      }
      html += '<div></div>'
      html += '</div><br>'
      for (var i = 0; i < dofTree.length; i++) {
        var dof = dofTree[i]
        if (dof.tags.includes(tag) || tag == 'all') {
          html += '<div class="dof">'
          html += '<div class="name" onclick="dofs('+i+')">'+ dof.name +'</div>'
          if (i == index) {
            // switch link to div and render out the code
            // html += '<img src="/res/dofs/'+ dof.name +'.gif" />'
            for (var j = 0; j < dof.code.length; j++) {
              var append = ''
              if (j > 0) {
                append = '-' + dof.code[j].context
              }
              html += '<img class="gif" title="'+ dof.name +'" src="/res/dofs/'+ dof.name + append +'.gif?v4" style="background-image: url(/res/dofs/loading.gif?v2)"/>'
              html += '<div class="history" onclick="$(\'#'+dof.name+j+'\').toggle()"style="cursor:pointer;text-align:center;background:black;color:var(--white);border-top:1px solid #333;">-- code --</div>'
              html += '<div id="'+dof.name+j+'" style="width: 100%; display:none;"><pre>['+ dof.code[j].context +']<br>'+ dof.code[j].code +'</pre></div>'
            }
            if (dof.history != null) {
              html += '<div class="history" onclick="$(\'#'+dof.name+'\').toggle()" style="cursor:pointer;text-align:center;">-- history --</div>'
              for (var k = 0; k < dof.history.length; k++) {
                html += '<div id="'+dof.name+'" class="history" style="display:none;">['+ dof.history[k].date +']<br>'+ dof.history[k].log +'</div>'
              }
            }
            html += '<br>'
          }
          html += '</div>'
        }
      }
      // html += '</div>'
      $('#dofs').html(html)
    }

    // var decaTime = function () {
    //   var dt = new Date();
    //   var secs = dt.getUTCSeconds() + (60 * dt.getUTCMinutes()) + (60 * 60 * dt.getUTCHours());
    //   var standardTime = secs / 8640;
    //   $('#time').html(standardTime.toFixed(3));
    //   $('#time').html(
    //     $('#time').html().substr(0, $('#time').html().length - 1)
    //     + "<span style='font-size: 16px; padding:2px;'>"
    //     + $('#time').html().substr(-1)
    //     + "</span>"
    //   );
    // };

    var embed = new Twitch.Embed("twitch-embed", {
      width: 854,
      height: 480,
      channel: "spatialfree",
      layout: "video",
      muted: false,
      autoplay: false
    })

    embed.addEventListener(Twitch.Embed.VIDEO_READY, () => {
      var player = embed.getPlayer()
      player.play()
    })

  </script>

  <div id="footerElement"></div>
</body>

</html>